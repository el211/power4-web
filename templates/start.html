{{define "start_topright"}}
{{/* Intentionally empty: music toggle is now in the global header (base template). */}}
{{end}}

{{define "start_content"}}
<section class="card">
    <h2 class="start-title">
        DÃ©marrer une partie
    </h2>



    <!-- novalidate disables HTML5 popups; server trims/validates -->
    <form method="post" action="/start" class="start-form" novalidate>
        <div class="row">
            <label>Mode</label>
            <select name="mode" required>
                <option value="local">Local (2 joueurs sur ce PC)</option>
                <option value="ai">Contre lâ€™IA</option>
                <option value="online">En ligne (2 PCs)</option>
            </select>
        </div>

        <div class="row">
            <label>Joueur Rouge</label>
            <input type="text" name="player1" placeholder="Rouge" value="{{.Player1}}" />
        </div>
        <div class="row">
            <label>Joueur Jaune</label>
            <input type="text" name="player2" placeholder="Jaune" value="{{.Player2}}" />
        </div>

        <div class="row">
            <label>DifficultÃ©</label>
            <select name="difficulty">
                <option value="easy"   {{if eq .Difficulty "easy"}}selected{{end}}>Easy â€” 6Ã—7 â€¢ 3 blocs</option>
                <option value="normal" {{if eq .Difficulty "normal"}}selected{{end}}>Normal â€” 6Ã—8 â€¢ 5 blocs</option>
                <option value="hard"   {{if eq .Difficulty "hard"}}selected{{end}}>Hard â€” 6Ã—9 â€¢ 7 blocs</option>
            </select>
        </div>

        <details class="row">
            <summary>Options en ligne</summary>
            <div class="inline">
                <!-- IMPORTANT: no pattern; maxlength only -->
                <input type="text" name="lobby_code"
                       placeholder="Code pour Rejoindre (ex: 9RR2)"
                       maxlength="10" autocomplete="off" autocapitalize="characters" />
                <!-- Create: never validate code field -->
                <button type="submit" name="online_action" value="create" class="btn-secondary" formnovalidate>
                    ðŸ†• CrÃ©er une salle (code auto)
                </button>
                <!-- Join submits normally; server uppercases/validates -->
                <button type="submit" name="online_action" value="join" class="btn-secondary">
                    ðŸ”— Rejoindre (avec code)
                </button>
            </div>
            <div class="hint">Ces boutons utilisent automatiquement le mode <em>En ligne</em>.</div>
        </details>

        <div class="row">
            <!-- Big button also bypasses browser validation -->
            <button type="submit" class="btn-primary" formnovalidate>ðŸš€ Lancer la partie</button>
        </div>
    </form>

    <p class="hint" style="margin-top:1rem">
        Astuce&nbsp;: utilisez le bouton <em>Musique</em> dans lâ€™en-tÃªte pour activer/dÃ©sactiver la musique.
    </p>
</section>
{{end}}
